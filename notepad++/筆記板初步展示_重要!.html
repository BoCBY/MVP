<!-- 工具條可以放在header, 也就是不會受透明度影響的地方 -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resizable Note Panel</title>
    <style>
        .draggable-panel {
            position: absolute;
            z-index: 9;
            background-color: rgba(255, 255, 255, var(--transparency, 0.9)); /* Set default transparency */
            border: 1px solid #ccc;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
            padding: 10px;
            resize: both;
            overflow: auto;
        }

        .panel-header {
			position: sticky;
            padding: 5px;
            background-color: #f0f0f0;
            cursor: move;
            user-select: none;
			top: 0;
            z-index: 10;
            width: calc(100% - 22px); /* Account for scrollbar width */
        }

        .close {
            float: right;
            cursor: pointer;
        }

        .close:hover {
            color: red;
        }

        .drag-handle {
            cursor: move;
            user-select: none;
        }
		
		#editor-container {
            height: calc(100% - 30px); /* Adjust height to fit content below the toolbar */
            overflow: auto;
            padding-top: 30px; /* Add padding to compensate for fixed toolbar */
        }


        .panel-footer {
            position: absolute;
            bottom: 5px;
            left: 5px;
        }

        #transparencyRange {
            width: 100px;
        }
    </style>
	<!-- Include Quill.js -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
<div>
	<iframe width="949" height="537" src="https://www.youtube.com/embed/WO8Rfk1xWIg?list=PLF4C2C0FE5389B474" title="[量子力學]第 0-1 講、Complex Linear Algebra 1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div>
<button id="noteButton">Open Note Panel</button>

<div id="notePanel" class="draggable-panel" style="display: none;">
    <div class="panel-header">
        <span class="close" id="closeButton">&times;</span>
        <span class="drag-handle">&#9776;</span>
    </div>
    <div class="panel-content" id="editor-container"></div>
    <div class="panel-footer">
        Transparency:
        <input type="range" min="0" max="1" step="0.1" value="0.9" id="transparencyRange">
    </div>
</div>

<script>
	document.getElementById("noteButton").addEventListener("click", function() {
    var notePanel = document.getElementById("notePanel");
    if (notePanel.style.display === "none") {
        notePanel.style.display = "block";
    } else {
        notePanel.style.display = "none";
    }
});

    // Make the note panel draggable
    dragElement(document.getElementById("notePanel"));

    // Make the note panel resizable
    // resizeElement(document.getElementById("notePanel"));

    // Close button functionality
    document.getElementById("closeButton").addEventListener("click", function() {
        document.getElementById("notePanel").style.display = "none";
    });
	
	// Initialize Quill editor
    var quill = new Quill('#editor-container', {
        theme: 'snow',
    });

    // Function to make an element draggable
    function dragElement(element) {
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        element.querySelector('.panel-header').onmousedown = dragMouseDown;

        function dragMouseDown(e) {
            if (e.target.classList.contains('panel-header')) {
                e = e || window.event;
                e.preventDefault();
                // get the mouse cursor position at startup:
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                // call a function whenever the cursor moves:
                document.onmousemove = elementDrag;
            }
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            // calculate the new cursor position:
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // set the element's new position:
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            // stop moving when mouse button is released:
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }

    // Function to make an element resizable
    /* function resizeElement(element) {
        const resizers = element.querySelectorAll('.resizer');
        let startX, startY, startWidth, startHeight;

        for (let i = 0; i < resizers.length; i++) {
            const currentResizer = resizers[i];
            currentResizer.addEventListener('mousedown', function(e) {
                startX = e.clientX;
                startY = e.clientY;
                startWidth = parseInt(document.defaultView.getComputedStyle(element).width, 10);
                startHeight = parseInt(document.defaultView.getComputedStyle(element).height, 10);
                document.addEventListener('mousemove', resize);
                document.addEventListener('mouseup', stopResize);
            });

            function resize(e) {
                if (currentResizer.classList.contains('bottom-right')) {
                    const width = startWidth + e.clientX - startX;
                    const height = startHeight + e.clientY - startY;
                    element.style.width = width + 'px';
                    element.style.height = height + 'px';
                } else if (currentResizer.classList.contains('bottom-left')) {
                    const height = startHeight + e.clientY - startY;
                    const width = startWidth - e.clientX + startX;
                    element.style.width = width + 'px';
                    element.style.height = height + 'px';
                    element.style.left = startX - e.clientX + 'px';
                } else if (currentResizer.classList.contains('top-right')) {
                    const width = startWidth + e.clientX - startX;
                    const height = startHeight - e.clientY + startY;
                    element.style.width = width + 'px';
                    element.style.height = height + 'px';
                    element.style.top = startY - e.clientY + 'px';
                } else {
                    const width = startWidth - e.clientX + startX;
                    const height = startHeight - e.clientY + startY;
                    element.style.width = width + 'px';
                    element.style.height = height + 'px';
                    element.style.top = startY - e.clientY + 'px';
                    element.style.left = startX - e.clientX + 'px';
                }
            }

            function stopResize() {
                document.removeEventListener('mousemove', resize);
                document.removeEventListener('mouseup', stopResize);
            }
        }
    }*/

    // Adjust transparency
    document.getElementById('transparencyRange').addEventListener('input', function() {
        const transparency = this.value;
        document.getElementById('notePanel').style.setProperty('--transparency', transparency);
    });
	
	
</script>
</body>
</html>
